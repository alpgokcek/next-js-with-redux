{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport axios from 'axios';\nimport fetch from 'isomorphic-fetch';\nimport { API_URL, GET_COMMENTS } from '../../../constants';\nexport var getComments = function getComments(postId) {\n  return function _callee(dispatch) {\n    var commentsFetch, allComments, comments;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(fetch(\"\".concat(API_URL, \"/comments\")));\n\n          case 2:\n            commentsFetch = _context.sent;\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(commentsFetch.json());\n\n          case 5:\n            allComments = _context.sent;\n            comments = allComments.filter(function (comment) {\n              return comment.postId === postId;\n            });\n            dispatch({\n              type: GET_COMMENTS,\n              payload: postId ? comments : allComments\n            });\n            return _context.abrupt(\"return\", comments);\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  };\n};","map":{"version":3,"sources":["/Users/alpgokcek/Desktop/next-js-poc/store/actions/comments/index.js"],"names":["axios","fetch","API_URL","GET_COMMENTS","getComments","postId","dispatch","commentsFetch","json","allComments","comments","filter","comment","type","payload"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,kBAAlB;AACA,SAASC,OAAT,EAAkBC,YAAlB,QAAsC,oBAAtC;AAGA,OAAO,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,MAAD;AAAA,SAAY,iBAAMC,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACTL,KAAK,WAAIC,OAAJ,eADI;;AAAA;AAC/BK,YAAAA,aAD+B;AAAA;AAAA,6CAEXA,aAAa,CAACC,IAAd,EAFW;;AAAA;AAE/BC,YAAAA,WAF+B;AAG/BC,YAAAA,QAH+B,GAGpBD,WAAW,CAACE,MAAZ,CAAmB,UAAAC,OAAO;AAAA,qBAAIA,OAAO,CAACP,MAAR,KAAiBA,MAArB;AAAA,aAA1B,CAHoB;AAIrCC,YAAAA,QAAQ,CAAC;AACPO,cAAAA,IAAI,EAAEV,YADC;AAEPW,cAAAA,OAAO,EAAET,MAAM,GAAGK,QAAH,GAAcD;AAFtB,aAAD,CAAR;AAJqC,6CAQ9BC,QAR8B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAZ;AAAA,CAApB","sourcesContent":["import axios from 'axios';\nimport fetch from 'isomorphic-fetch'\nimport { API_URL, GET_COMMENTS } from '../../../constants';\n\n\nexport const getComments = (postId) => async dispatch => {\n  const commentsFetch = await fetch(`${API_URL}/comments`)\n  const allComments = await commentsFetch.json();\n  const comments = allComments.filter(comment => comment.postId===postId)\n  dispatch({\n    type: GET_COMMENTS,\n    payload: postId ? comments : allComments\n  })\n  return comments;\n}\n"]},"metadata":{},"sourceType":"module"}